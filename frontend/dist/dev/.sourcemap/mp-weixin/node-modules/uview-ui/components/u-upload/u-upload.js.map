{"version":3,"sources":["webpack:///./node_modules/uview-ui/components/u-upload/u-upload.vue?0c28","webpack:///./node_modules/uview-ui/components/u-upload/u-upload.vue?40e7","webpack:///./node_modules/uview-ui/components/u-upload/u-upload.vue?fd33","webpack:///./node_modules/uview-ui/components/u-upload/u-upload.vue?36e3","webpack:///./node_modules/uview-ui/components/u-upload/u-upload.vue","webpack:///./node_modules/uview-ui/components/u-upload/u-upload.vue?a555","webpack:///./node_modules/uview-ui/components/u-upload/u-upload.vue?6809"],"names":["name","props","showUploadList","type","Boolean","default","action","String","maxCount","Number","showProgress","disabled","imageMode","header","Object","formData","sizeType","Array","sourceType","previewFullImage","multiple","deletable","maxSize","MAX_VALUE","fileList","uploadText","autoUpload","showTips","customBtn","width","delBgColor","delColor","delIcon","toJson","beforeUpload","Function","limitType","mounted","data","lists","isInCount","uploading","watch","immediate","handler","val","map","value","tmp","some","url","push","error","progress","n","$emit","methods","clear","reUpload","uploadFile","selectFile","camera","compressed","maxDuration","chooseFile","newMaxCount","length","Promise","resolve","reject","uni","chooseImage","count","success","fail","then","res","file","listOldLength","tempFiles","index","checkFileExt","size","showToast","path","catch","message","force","title","icon","upload","retry","response","showLoading","beforeResponse","bind","$u","$parent","call","err","task","filePath","test","jsonString","JSON","parse","includes","statusCode","uploadError","e","complete","hideLoading","onProgressUpdate","deleteItem","showModal","content","confirm","process","uploadTask","abort","splice","$forceUpdate","remove","doPreviewImage","images","item","previewImage","urls","current","noArrowExt","fileExt","reg","replace","toLowerCase","ext"],"mappings":"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","file":"node-modules/uview-ui/components/u-upload/u-upload.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./u-upload.vue?vue&type=template&id=49deb6f2&scoped=true&\"\nvar renderjs\nimport script from \"./u-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./u-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./u-upload.vue?vue&type=style&index=0&id=49deb6f2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49deb6f2\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"node_modules/uview-ui/components/u-upload/u-upload.vue\"\nexport default component.exports","export * from \"-!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=template&id=49deb6f2&scoped=true&\"","var components = {\n  \"u-icon\": function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n    )\n  },\n  \"u-line-progress\": function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-line-progress/u-line-progress\" */ \"uview-ui/components/u-line-progress/u-line-progress.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../babel-loader/lib/index.js!../../../@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../babel-loader/lib/index.js!../../../@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n/**\r\n * upload 图片上传\r\n * @description 该组件用于上传图片场景\r\n * @tutorial https://www.uviewui.com/components/upload.html\r\n * @property {String} action 服务器上传地址\r\n * @property {String Number} max-count 最大选择图片的数量（默认99）\r\n * @property {Boolean} custom-btn 如果需要自定义选择图片的按钮，设置为true（默认false）\r\n * @property {Boolean} show-progress 是否显示进度条（默认true）\r\n * @property {Boolean} disabled 是否启用(显示/移仓)组件（默认false）\r\n * @property {String} image-mode 预览图片等显示模式，可选值为uni的image的mode属性值（默认aspectFill）\r\n * @property {String} del-icon 右上角删除图标名称，只能为uView内置图标\r\n * @property {String} del-bg-color 右上角关闭按钮的背景颜色\r\n * @property {String} del-color 右上角关闭按钮图标的颜色\r\n * @property {Object} header 上传携带的头信息，对象形式\r\n * @property {Object} form-data 上传额外携带的参数\r\n * @property {String} name 上传文件的字段名，供后端获取使用（默认file）\r\n * @property {Array<String>} size-type original 原图，compressed 压缩图，默认二者都有（默认['original', 'compressed']）\r\n * @property {Array<String>} source-type 选择图片的来源，album-从相册选图，camera-使用相机，默认二者都有（默认['album', 'camera']）\r\n * @property {Boolean} preview-full-image\t是否可以通过uni.previewImage预览已选择的图片（默认true）\r\n * @property {Boolean} multiple\t是否开启图片多选，部分安卓机型不支持（默认true）\r\n * @property {Boolean} deletable 是否显示删除图片的按钮（默认true）\r\n * @property {String Number} max-size 选择单个文件的最大大小，单位B(byte)，默认不限制（默认Number.MAX_VALUE）\r\n * @property {Array<Object>} file-list 默认显示的图片列表，数组元素为对象，必须提供url属性\r\n * @property {Boolean} upload-text 选择图片按钮的提示文字（默认“选择图片”）\r\n * @property {Boolean} auto-upload 选择完图片是否自动上传，见上方说明（默认true）\r\n * @property {Boolean} show-tips 特殊情况下是否自动提示toast，见上方说明（默认true）\r\n * @property {Boolean} show-upload-list 是否显示组件内部的图片预览（默认true）\r\n * @event {Function} on-oversize 图片大小超出最大允许大小\r\n * @event {Function} on-preview 全屏预览图片时触发\r\n * @event {Function} on-remove 移除图片时触发\r\n * @event {Function} on-success 图片上传成功时触发\r\n * @event {Function} on-change 图片上传后，无论成功或者失败都会触发\r\n * @event {Function} on-error 图片上传失败时触发\r\n * @event {Function} on-progress 图片上传过程中的进度变化过程触发\r\n * @event {Function} on-uploaded 所有图片上传完毕触发\r\n * @event {Function} on-choose-complete 每次选择图片后触发，只是让外部可以得知每次选择后，内部的文件列表\r\n * @example <u-upload :action=\"action\" :file-list=\"fileList\" ></u-upload>\r\n */\r\nexport default {\r\n\tname: 'u-upload',\r\n\tprops: {\r\n\t\t//是否显示组件自带的图片预览功能\r\n\t\tshowUploadList: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 后端地址\r\n\t\taction: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\t// 最大上传数量\r\n\t\tmaxCount: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: 52\r\n\t\t},\r\n\t\t//  是否显示进度条\r\n\t\tshowProgress: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否启用\r\n\t\tdisabled: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 预览上传的图片时的裁剪模式，和image组件mode属性一致\r\n\t\timageMode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'aspectFill'\r\n\t\t},\r\n\t\t// 头部信息\r\n\t\theader: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 额外携带的参数\r\n\t\tformData: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 上传的文件字段名\r\n\t\tname: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'file'\r\n\t\t},\r\n\t\t// 所选的图片的尺寸, 可选值为original compressed\r\n\t\tsizeType: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn ['original', 'compressed'];\r\n\t\t\t}\r\n\t\t},\r\n\t\tsourceType: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn ['album', 'camera'];\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 是否在点击预览图后展示全屏图片预览\r\n\t\tpreviewFullImage: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否开启图片多选，部分安卓机型不支持\r\n\t\tmultiple: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否展示删除按钮\r\n\t\tdeletable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 文件大小限制，单位为byte\r\n\t\tmaxSize: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: Number.MAX_VALUE\r\n\t\t},\r\n\t\t// 显示已上传的文件列表\r\n\t\tfileList: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 上传区域的提示文字\r\n\t\tuploadText: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '选择图片'\r\n\t\t},\r\n\t\t// 是否自动上传\r\n\t\tautoUpload: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否显示toast消息提示\r\n\t\tshowTips: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否通过slot自定义传入选择图标的按钮\r\n\t\tcustomBtn: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 内部预览图片区域和选择图片按钮的区域宽度，高等于宽\r\n\t\twidth: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: 200\r\n\t\t},\r\n\t\t// 右上角关闭按钮的背景颜色\r\n\t\tdelBgColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#fa3534'\r\n\t\t},\r\n\t\t// 右上角关闭按钮的叉号图标的颜色\r\n\t\tdelColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#ffffff'\r\n\t\t},\r\n\t\t// 右上角删除图标名称，只能为uView内置图标\r\n\t\tdelIcon: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'close'\r\n\t\t},\r\n\t\t// 如果上传后的返回值为json字符串，是否自动转json\r\n\t\ttoJson: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 上传前的钩子，每个文件上传前都会执行\r\n\t\tbeforeUpload: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\t// 允许上传的图片后缀\r\n\t\tlimitType:{\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn ['png', 'jpg', 'jpeg', 'webp', 'gif'];\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tmounted() {},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tlists: [],\r\n\t\t\tisInCount: true,\r\n\t\t\tuploading: false\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tfileList: {\r\n\t\t\timmediate: true,\r\n\t\t\thandler(val) {\r\n\t\t\t\tval.map(value => {\r\n\t\t\t\t\t// 首先检查内部是否已经添加过这张图片，因为外部绑定了一个对象给fileList的话(对象引用)，进行修改外部fileList\r\n\t\t\t\t\t// 时，会触发watch，导致重新把原来的图片再次添加到this.lists\r\n\t\t\t\t\t// 数组的some方法意思是，只要数组元素有任意一个元素条件符合，就返回true，而另一个数组的every方法的意思是数组所有元素都符合条件才返回true\r\n\t\t\t\t\tlet tmp = this.lists.some(val => {\r\n\t\t\t\t\t\treturn val.url == value.url;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 如果内部没有这个图片(tmp为false)，则添加到内部\r\n\t\t\t\t\t!tmp && this.lists.push({ url: value.url, error: false, progress: 100 });\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 监听lists的变化，发出事件\r\n\t\tlists(n) {\r\n\t\t\tthis.$emit('on-list-change', n);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 清除列表\r\n\t\tclear() {\r\n\t\t\tthis.lists = [];\r\n\t\t},\r\n\t\t// 重新上传队列中上传失败的所有文件\r\n\t\treUpload() {\r\n\t\t\tthis.uploadFile();\r\n\t\t},\r\n\t\t// 选择图片\r\n\t\tselectFile() {\r\n\t\t\tif (this.disabled) return;\r\n\t\t\tconst { name = '', maxCount, multiple, maxSize, sizeType, lists, camera, compressed, maxDuration, sourceType } = this;\r\n\t\t\tlet chooseFile = null;\r\n\t\t\tconst newMaxCount = maxCount - lists.length;\r\n\t\t\t// 设置为只选择图片的时候使用 chooseImage 来实现\r\n\t\t\tchooseFile = new Promise((resolve, reject) => {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: multiple ? (newMaxCount > 9 ? 9 : newMaxCount) : 1,\r\n\t\t\t\t\tsourceType: sourceType,\r\n\t\t\t\t\tsizeType,\r\n\t\t\t\t\tsuccess: resolve,\r\n\t\t\t\t\tfail: reject\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tchooseFile\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tlet file = null;\r\n\t\t\t\t\tlet listOldLength = this.lists.length;\r\n\t\t\t\t\tres.tempFiles.map((val, index) => {\r\n\t\t\t\t\t\t// 检查文件后缀是否允许，如果不在this.limitType内，就会返回false\r\n\t\t\t\t\t\tif(!this.checkFileExt(val)) return ;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 如果是非多选，index大于等于1或者超出最大限制数量时，不处理\r\n\t\t\t\t\t\tif (!multiple && index >= 1) return;\r\n\t\t\t\t\t\tif (val.size > maxSize) {\r\n\t\t\t\t\t\t\tthis.$emit('on-oversize', val, this.lists);\r\n\t\t\t\t\t\t\tthis.showToast('超出允许的文件大小');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (maxCount <= lists.length) {\r\n\t\t\t\t\t\t\t\tthis.$emit('on-exceed', val, this.lists);\r\n\t\t\t\t\t\t\t\tthis.showToast('超出最大允许的文件个数');\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlists.push({\r\n\t\t\t\t\t\t\t\turl: val.path,\r\n\t\t\t\t\t\t\t\tprogress: 0,\r\n\t\t\t\t\t\t\t\terror: false\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 每次图片选择完，抛出一个事件，并将当前内部选择的图片数组抛出去\r\n\t\t\t\t\tthis.$emit('on-choose-complete', this.lists);\r\n\t\t\t\t\tif (this.autoUpload) this.uploadFile(listOldLength);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\t// this.$emit('on-error', error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t// 提示用户消息\r\n\t\tshowToast(message, force = false) {\r\n\t\t\tif (this.showTips || force) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: message,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 该方法供用户通过ref调用，手动上传\r\n\t\tupload() {\r\n\t\t\tthis.uploadFile();\r\n\t\t},\r\n\t\t// 对失败的图片重新上传\r\n\t\tretry(index) {\r\n\t\t\tthis.lists[index].progress = 0;\r\n\t\t\tthis.lists[index].error = false;\r\n\t\t\tthis.lists[index].response = null;\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '重新上传'\r\n\t\t\t});\r\n\t\t\tthis.uploadFile(index);\r\n\t\t},\r\n\t\t// 上传图片\r\n\t\tasync uploadFile(index = 0) {\r\n\t\t\tif (this.disabled) return;\r\n\t\t\tif (this.uploading) return;\r\n\t\t\t// 全部上传完成\r\n\t\t\tif (index >= this.lists.length) {\r\n\t\t\t\tthis.$emit('on-uploaded', this.lists);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 检查是否是已上传或者正在上传中\r\n\t\t\tif (this.lists[index].progress == 100) {\r\n\t\t\t\tif (this.autoUpload == false) this.uploadFile(index + 1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 执行before-upload钩子\r\n\t\t\tif(this.beforeUpload && typeof(this.beforeUpload) === 'function') {\r\n\t\t\t\t// 执行回调，同时传入索引和文件列表当作参数\r\n\t\t\t\t// 在微信，支付宝等环境(H5正常)，会导致父组件定义的customBack()函数体中的this变成子组件的this\r\n\t\t\t\t// 通过bind()方法，绑定父组件的this，让this.customBack()的this为父组件的上下文\r\n\t\t\t\t// 因为upload组件可能会被嵌套在其他组件内，比如u-form，这时this.$parent其实为u-form的this，\r\n\t\t\t\t// 非页面的this，所以这里需要往上历遍，一直寻找到最顶端的$parent，这里用了this.$u.$parent.call(this)\r\n\t\t\t\t// 明白意思即可，无需纠结this.$u.$parent.call(this)的细节\r\n\t\t\t\tlet beforeResponse = this.beforeUpload.bind(this.$u.$parent.call(this))(index, this.lists);\r\n\t\t\t\t// 判断是否返回了promise\r\n\t\t\t\tif (!!beforeResponse && typeof beforeResponse.then === 'function') {\r\n\t\t\t\t\tawait beforeResponse.then(res => {\r\n\t\t\t\t\t\t// promise返回成功，不进行动作，继续上传\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t// 进入catch回调的话，继续下一张\r\n\t\t\t\t\t\treturn this.uploadFile(index + 1);\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if(beforeResponse === false) {\r\n\t\t\t\t\t // 如果返回false，继续下一张图片的上传\r\n\t\t\t\t\treturn this.uploadFile(index + 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 检查上传地址\r\n\t\t\tif (!this.action) {\r\n\t\t\t\tthis.showToast('请配置上传地址', true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.lists[index].error = false;\r\n\t\t\tthis.uploading = true;\r\n\t\t\t// 创建上传对象\r\n\t\t\tconst task = uni.uploadFile({\r\n\t\t\t\turl: this.action,\r\n\t\t\t\tfilePath: this.lists[index].url,\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tformData: this.formData,\r\n\t\t\t\theader: this.header,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t// 判断是否json字符串，将其转为json格式\r\n\t\t\t\t\tlet data = this.toJson && this.$u.test.jsonString(res.data) ? JSON.parse(res.data) : res.data;\r\n\t\t\t\t\tif (![200, 201, 204].includes(res.statusCode)) {\r\n\t\t\t\t\t\tthis.uploadError(index, data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 上传成功\r\n\t\t\t\t\t\tthis.lists[index].response = data;\r\n\t\t\t\t\t\tthis.lists[index].progress = 100;\r\n\t\t\t\t\t\tthis.lists[index].error = false;\r\n\t\t\t\t\t\tthis.$emit('on-success', data, index, this.lists);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tthis.uploadError(index, e);\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: res => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthis.uploading = false;\r\n\t\t\t\t\tthis.uploadFile(index + 1);\r\n\t\t\t\t\tthis.$emit('on-change', res, index, this.lists);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ttask.onProgressUpdate(res => {\r\n\t\t\t\tif (res.progress > 0) {\r\n\t\t\t\t\tthis.lists[index].progress = res.progress;\r\n\t\t\t\t\tthis.$emit('on-progress', res, index, this.lists);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 上传失败\r\n\t\tuploadError(index, err) {\r\n\t\t\tthis.lists[index].progress = 0;\r\n\t\t\tthis.lists[index].error = true;\r\n\t\t\tthis.lists[index].response = null;\r\n\t\t\tthis.$emit('on-error', err, index, this.lists);\r\n\t\t\tthis.showToast('上传失败，请重试');\r\n\t\t},\r\n\t\t// 删除一个图片\r\n\t\tdeleteItem(index) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '您确定要删除此项吗？',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tif (this.lists[index].process < 100 && this.lists[index].process > 0) {\r\n\t\t\t\t\t\t\ttypeof this.lists[index].uploadTask != 'undefined' && this.lists[index].uploadTask.abort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.lists.splice(index, 1);\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t\tthis.$emit('on-remove', index, this.lists);\r\n\t\t\t\t\t\tthis.showToast('移除成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 用户通过ref手动的形式，移除一张图片\r\n\t\tremove(index) {\r\n\t\t\t// 判断索引的合法范围\r\n\t\t\tif (index >= 0 && index < this.lists.length) {\r\n\t\t\t\tthis.lists.splice(index, 1);\r\n\t\t\t\tthis.$emit('on-list-change', this.lists);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 预览图片\r\n\t\tdoPreviewImage(url, index) {\r\n\t\t\tif (!this.previewFullImage) return;\r\n\t\t\tconst images = this.lists.map(item => item.url || item.path);\r\n\t\t\tuni.previewImage({\r\n\t\t\t\turls: images,\r\n\t\t\t\tcurrent: url,\r\n\t\t\t\tsuccess: () => {\r\n\t\t\t\t\tthis.$emit('on-preview', url, this.lists);\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '预览图片失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 判断文件后缀是否允许\r\n\t\tcheckFileExt(file) {\r\n\t\t\t// 检查是否在允许的后缀中\r\n\t\t\tlet noArrowExt = false;\r\n\t\t\t// 获取后缀名\r\n\t\t\tlet fileExt = '';\r\n\t\t\tconst reg = /.+\\./;\r\n\t\t\t// 如果是H5，需要从name中判断\r\n\r\n\r\n\r\n\t\t\t// 非H5，需要从path中读取后缀\r\n\r\n\t\t\tfileExt = file.path.replace(reg, \"\").toLowerCase();\r\n\r\n\t\t\t// 使用数组的some方法，只要符合limitType中的一个，就返回true\r\n\t\t\tnoArrowExt = this.limitType.some(ext => {\r\n\t\t\t\t// 转为小写\r\n\t\t\t\treturn ext.toLowerCase() === fileExt;\r\n\t\t\t})\r\n\t\t\tif(!noArrowExt) this.showToast(`不允许选择${fileExt}格式的文件`);\r\n\t\t\treturn noArrowExt;\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=style&index=0&id=49deb6f2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=style&index=0&id=49deb6f2&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1597745929010\n      var cssReload = require(\"H:/work/Vue.js/cy_recruitment/frontend/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}